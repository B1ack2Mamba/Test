begin;
-- Seed: negotiation-style (public test + paid interpretation)

delete from public.tests where slug = 'negotiation-style';

insert into public.tests (slug, title, description, type, json, price_rub, is_published) values
(
  'negotiation-style', 'Ваш переговорный стиль', '', 'forced_pair_v1',
  $$
{"slug": "negotiation-style", "title": "Ваш переговорный стиль", "type": "forced_pair_v1", "questions": [{"order": 1, "options": [{"tag": "E", "text": "Я прилагаю все силы, чтобы сберечь отношения с партнером."}, {"tag": "B", "text": "Я стараюсь увидеть движущие мотивы сторон."}]}, {"order": 2, "options": [{"tag": "D", "text": "Я прилагаю усилия, чтобы разрядить острые ситуации."}, {"tag": "A", "text": "Я добиваюсь уступок настойчивостью."}]}, {"order": 3, "options": [{"tag": "E", "text": "Я сосредоточиваюсь на решении проблем партнера."}, {"tag": "D", "text": "Я стараюсь не конфликтовать без необходимости."}]}, {"order": 4, "options": [{"tag": "C", "text": "Я ищу справедливых компромиссов."}, {"tag": "E", "text": "Я прилагаю все силы, чтобы сберечь отношения с партнером."}]}, {"order": 5, "options": [{"tag": "C", "text": "Я предлагаю справедливые компромиссы."}, {"tag": "D", "text": "Я избегаю личных распрей."}]}, {"order": 6, "options": [{"tag": "C", "text": "Я ищу середину между нашими позициями."}, {"tag": "B", "text": "Я ищу проблемы, лежащие в истоке нашего несогласия."}]}, {"order": 7, "options": [{"tag": "D", "text": "Я тактично улаживаю многие противоречия."}, {"tag": "C", "text": "На переговорах я ожидаю обмена уступками."}]}, {"order": 8, "options": [{"tag": "A", "text": "Я ясно заявляю о своих целях."}, {"tag": "B", "text": "Я фокусирую внимание на потребностях другой стороны."}]}, {"order": 9, "options": [{"tag": "D", "text": "Я предпочитаю уклоняться от конфликтов с другими людьми."}, {"tag": "A", "text": "Я выигрываю позиции за счет сильных аргументов."}]}, {"order": 10, "options": [{"tag": "C", "text": "Я обычно охотно иду на компромисс."}, {"tag": "A", "text": "Мне нравится выигрывать уступки."}]}, {"order": 11, "options": [{"tag": "B", "text": "Я честно подхожу ко всем проблемам между нами."}, {"tag": "E", "text": "Меня больше волнуют отношения, чем выигрыш последней уступки."}]}, {"order": 12, "options": [{"tag": "D", "text": "Я стараюсь не конфликтовать с людьми без необходимости."}, {"tag": "C", "text": "Я ищу справедливых компромиссов."}]}, {"order": 13, "options": [{"tag": "C", "text": "Я уступаю и ожидаю уступок в ответ."}, {"tag": "A", "text": "Я стараюсь на переговорах достичь всех своих целей."}]}, {"order": 14, "options": [{"tag": "A", "text": "Мне больше нравится получать уступки, чем уступать."}, {"tag": "E", "text": "Я стараюсь беречь отношения."}]}, {"order": 15, "options": [{"tag": "E", "text": "Я учитываю потребности партнера, чтобы сберечь отношения."}, {"tag": "D", "text": "Если удается, я оставляю конфликтные ситуации другим."}]}, {"order": 16, "options": [{"tag": "E", "text": "Я стараюсь учитывать потребности другого человека."}, {"tag": "A", "text": "Я прилагаю все силы, чтобы достичь целей."}]}, {"order": 17, "options": [{"tag": "A", "text": "Я добиваюсь обсуждения своих целей."}, {"tag": "D", "text": "Я опираюсь на те области, где мы достигли согласия."}]}, {"order": 18, "options": [{"tag": "E", "text": "Я всегда слежу за состоянием наших отношений."}, {"tag": "C", "text": "Я уступаю и рассчитываю, что партнер тоже уступит."}]}, {"order": 19, "options": [{"tag": "B", "text": "Я нахожу и обсуждаю все наши противоречия."}, {"tag": "D", "text": "Я стараюсь избегать раздоров."}]}, {"order": 20, "options": [{"tag": "A", "text": "Я получаю свою долю уступок."}, {"tag": "E", "text": "Я стараюсь беречь отношения."}]}, {"order": 21, "options": [{"tag": "B", "text": "Я нахожу и обсуждаю все наши противоречия."}, {"tag": "C", "text": "Я ищу компромиссы, которые снимут наши противоречия."}]}, {"order": 22, "options": [{"tag": "E", "text": "Я устанавливаю с партнером добрые отношения."}, {"tag": "B", "text": "Я предлагаю варианты, которые учитывают нужды обеих сторон."}]}, {"order": 23, "options": [{"tag": "C", "text": "Я ищу середины."}, {"tag": "A", "text": "На переговорах я стараюсь достичь своих целей."}]}, {"order": 24, "options": [{"tag": "B", "text": "Я нахожу все наши противоречия и придумываю решения."}, {"tag": "D", "text": "Я стараюсь не конфликтовать без необходимости."}]}, {"order": 25, "options": [{"tag": "E", "text": "Я стараюсь сохранять отношения с партнером."}, {"tag": "C", "text": "Я ищу справедливых компромиссов."}]}, {"order": 26, "options": [{"tag": "D", "text": "Я опираюсь на вопросы, по которым мы согласились."}, {"tag": "B", "text": "Я выявляю и рассматриваю все предметы, по которым мы не сошлись."}]}, {"order": 27, "options": [{"tag": "A", "text": "Я прилагаю все силы, чтобы достичь целей."}, {"tag": "B", "text": "Я обращаю внимание на потребности других людей."}]}, {"order": 28, "options": [{"tag": "C", "text": "Я ищу справедливого компромисса."}, {"tag": "B", "text": "Я стараюсь увидеть все исходные проблемы."}]}, {"order": 29, "options": [{"tag": "D", "text": "Я избегаю ненужного несогласия."}, {"tag": "E", "text": "Я сосредоточиваюсь на решении проблем другого."}]}, {"order": 30, "options": [{"tag": "A", "text": "Я стараюсь достичь целей."}, {"tag": "B", "text": "Я прилагаю усилия, чтобы рассмотреть потребности всех."}]}], "scoring": {"tags": ["A", "B", "C", "D", "E"], "tag_to_style": {"A": "Состязание", "B": "Сотрудничество", "C": "Компромисс", "D": "Уклонение", "E": "Подстройка"}, "thresholds_percent": {"strong_gte": 70, "weak_lte": 30}}}
  $$::jsonb,
  99,
  true
);

-- Store interpretation separately (behind RLS + unlock)
insert into public.test_interpretations (test_slug, content) values
(
  'negotiation-style',
  $$
{"note": "Расшифровка открывается после оплаты. Этот текст — пример; замените на ваш авторский в таблице public.test_interpretations.", "styles": {"A": {"strong": "**Состязание (A) — сильная склонность.**\n\nВы идёте в переговоры как в матч: чёткая позиция, давление аргументами, скорость, контроль. Это мощно, когда нужна защита границ, кризисное решение или другая сторона играет жёстко.\n\nРиски: можно пережечь отношения, потерять информацию и создать сопротивление.\n\nРекомендация: добавляйте 1–2 вопроса про интересы партнёра и заранее определяйте, что вы готовы отдать без потери смысла.", "weak": "**Состязание (A) — слабая склонность.**\n\nВы редко продавливаете и не любите силовые игры. Это помогает сохранять контакт, но иногда ведёт к уступкам там, где стоило удержать границу.\n\nРекомендация: отработайте короткую формулу позиции: цель → причина → минимум, ниже которого не идёте."}, "B": {"strong": "**Сотрудничество (B) — сильная склонность.**\n\nВы ищете корневую проблему и собираете картину мотивов обеих сторон. Сильная сторона — решения win-win, которые выдерживают время: меньше скрытых конфликтов, больше доверия и качества договорённостей.\n\nРиски: можно увязнуть в обсуждениях и потратить много времени, если другая сторона не готова сотрудничать.\n\nРекомендация: фиксируйте рамки (срок/формат/критерии решения) и держите запасной план.", "weak": "**Сотрудничество (B) — слабая склонность.**\n\nВы нечасто копаете в мотивы и исходные причины — скорее решаете задачу “как быстрее закрыть вопрос”. Из-за этого иногда повторяются одни и те же конфликты.\n\nРекомендация: перед финальным решением задайте 2 вопроса: “зачем вам это?” и “что будет считаться успехом?”"}, "C": {"strong": "**Компромисс (C) — сильная склонность.**\n\nВы умеете быстро находить середину и разруливать спор через обмен уступками. Это отлично для ограниченного времени и когда ставки средние.\n\nРиски: компромисс может стать “скидкой на обе стороны” — теряется лучший вариант, а причина конфликта остаётся.\n\nРекомендация: сначала ищите 1–2 креативных варианта (как в сотрудничестве), и только потом переходите к размену уступками.", "weak": "**Компромисс (C) — слабая склонность.**\n\nВы либо идёте жёстко, либо уходите в избегание/подстройку, но “середину” находите реже.\n\nРекомендация: тренируйте список уступок: что вы готовы отдать, что для вас критично, и что можно обменять без боли."}, "D": {"strong": "**Уклонение (D) — сильная склонность.**\n\nВы умеете не раздувать конфликт и часто снимаете напряжение паузой. Это полезно, когда эмоции высокие и любое решение сейчас будет хуже.\n\nРиски: нерешённые вопросы копятся, а партнёр может воспринимать паузы как безразличие.\n\nРекомендация: заменяйте “уход” на “перенос с датой”: договоритесь, когда и в каком формате вернётесь к теме.", "weak": "**Уклонение (D) — слабая склонность.**\n\nВы редко откладываете и предпочитаете разбирать всё сразу. Это хорошо для ясности, но иногда мешает, когда сторонам нужна пауза, чтобы остыть.\n\nРекомендация: используйте короткий тайм-аут: 10–30 минут или “вернёмся завтра в 12:00”."}, "E": {"strong": "**Подстройка (E) — сильная склонность.**\n\nВы ставите отношения выше выигрыша одной уступки: поддержка, эмпатия, забота о комфорте партнёра. Это создаёт доверие и долгосрочные связи.\n\nРиски: можно системно недополучать своё и формировать перекос в отношениях.\n\nРекомендация: заранее определяйте 1–2 своих обязательных условия и озвучивайте их спокойно, без оправданий.", "weak": "**Подстройка (E) — слабая склонность.**\n\nВы не склонны подстраиваться и редко жертвуете своим ради мира. Это помогает держать границы, но иногда делает общение холоднее, чем нужно.\n\nРекомендация: добавляйте короткий “мостик отношений”: признание вклада партнёра + уважительный тон + ясная просьба."}}}
  $$::jsonb
)
on conflict (test_slug) do update set content = excluded.content, updated_at = now();

commit;
